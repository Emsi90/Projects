(function(){
    
    //toggle menu
    
    var menuBackground = document.querySelector('.background-menu');
    
    window.addEventListener('scroll', function(){
        
        if(scrollY > 100) {
            menuBackground.style.background = '#f38181';
        } else {
            menuBackground.style.background = 'transparent';
        }
        
    }, false);
    
    //Accordion
    
    var accordionClick = document.querySelectorAll('.content__accordion-header');
    var accordionDesc = document.querySelectorAll('.content__accordion-description');
    
    accordionClick.forEach(function(acc , index) {
        
        acc.onclick = function(e) {
            
            for(var i = 0; i < accordionDesc.length; i++) {
                console.log(accordionDesc[i]);
                accordionDesc[i].classList.remove('content__accordion-description-open');
            }
            
            accordionDesc[index].classList.add('content__accordion-description-open');

            
        };
        
    });
        
    
})();

(function(){
    
    var hamburgerButton = document.querySelector('.hamburger'),
        hamburgerIcon = document.querySelector('.hamburger__icon'),
        slideMenu = document.querySelector('.menu__slide-menu');
    
    hamburgerButton.onclick = function() {
        
        hamburgerIcon.classList.toggle('open');
        slideMenu.classList.toggle('open');
        
    };
    
    
})();

(function(){
    
    var slides = document.querySelectorAll('.slider__slide');
    var timeBars = document.querySelectorAll('.slider__progressBar');
    
    
    [].forEach.call(slides, function(slide) {
       
        var currentIndex = 0;
        var width = 100;
        
        function switchImg() {

            slide.style.left = -width * currentIndex + '%';

        }

        function progressBar() {

            var barWidth = 0;
            var timeToProgress = setInterval(function() {

                barWidth += 1;

                if(barWidth > 100) {
                    clearInterval(timeToProgress);
                } else {
                    timeBars[currentIndex].value = barWidth;
                }

            }, 40);

        }

        progressBar();

        var tickTock = setInterval(function() {

            progressBar();
            timeBars[currentIndex].value = 0;

            currentIndex++;
            switchImg();

            if(currentIndex > slides.length - 1) {
                slide.style.left = 0;
                currentIndex = 0;
            }

        }, 4001);
    
        
    });
    
})();

(function(){
    
    function Counter(counter, container) {
    
    this.counter = counter;
    this.container = container;
    this.noRepeat = true;

    document.addEventListener('scroll', this.startCounter.bind(this), false);
    
    }

    Counter.prototype.startCounter = function() {

        [].forEach.call(this.counter, function(elem) {


            var posTop = (elem.offsetTop - this.container.offsetTop / 2) + (this.container.offsetHeight / 2) - (elem.offsetHeight);
            var register = 0;

    //        console.log(this.container.offsetTop);
//            console.log(elem.offsetTop);
//            console.log((elem.offsetTop));
//            console.log(Math.round(scrollY));
            if((elem.offsetTop - posTop) <= Math.round(scrollY) && this.noRepeat) {

//                console.log('yes');

                var goCounter = setInterval(function(){

                    this.noRepeat = false;
                    if(register <= elem.dataset.scope) {
                        elem.textContent = register++;
                    } else {
                        clearInterval(goCounter);
                    }

                }.bind(this), 100);

            }

        }.bind(this));

    };
    
    var counter = new Counter(document.querySelectorAll('.counter'), document.querySelector('.content__counters'));
    
})();